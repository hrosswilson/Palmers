<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#2563eb">
    <title>Fuel Tracker - Track Machine Fuel Consumption</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Preload hero background image for better performance -->
    <link rel="preload" href="20240829_161839 Copy.jpg" as="image" type="image/jpeg">
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="nav-brand">P B Palmer & Son</div>
            <ul class="nav-menu">
                <li><a href="#home" class="nav-link">Home</a></li>
                <li><a href="#log-fuel" class="nav-link">Log Fuel</a></li>
                <li><a href="#view-data" class="nav-link">View Data</a></li>
                <li><a href="#analytics" class="nav-link">Analytics</a></li>
            </ul>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </nav>
    </header>

    <main>
        <section id="home" class="hero">
            <div class="container">
                <h1 class="hero-title">Fuel Tracker</h1>
                <p class="hero-subtitle">Track fuel consumption and machine hours across your entire fleet</p>
                <button class="cta-button" onclick="scrollToSection('log-fuel')">Log Fuel Now</button>
            </div>
        </section>

        <section id="log-fuel" class="log-fuel">
            <div class="container">
                <h2 class="section-title">Log Fuel Consumption</h2>
                <div class="form-container">
                    <div class="form-intro">
                        <h3>Track Your Machine Fuel Usage</h3>
                        <p>Select your machine, enter the fuel quantity and current hours to log your fuel consumption.</p>
                    </div>
                    <div class="google-form-wrapper">
                        <div class="form-header">
                            <h4>Fuel Log Form</h4>
                            <button class="enlarge-form-button" onclick="openFormModal()" title="Enlarge Form">
                                Enlarge
                            </button>
                        </div>
                        <iframe 
                            src="https://docs.google.com/forms/d/e/1FAIpQLSdooF1nSkyBdkMW6JbZbK7E1M_cuUD-32rkk5hIMS5TjaPWbw/viewform?embedded=true" 
                            width="100%" 
                            height="600" 
                            frameborder="0" 
                            marginheight="0" 
                            marginwidth="0">
                            Loading…
                        </iframe>
                    </div>
                </div>
            </div>
        </section>

        <section id="view-data" class="view-data">
            <div class="container">
                <h2 class="section-title">Fuel Data Overview</h2>
                <div class="data-content">
                    <div class="data-intro">
                        <h3>Recent Fuel Logs</h3>
                        <p>View and analyse your fuel consumption data across all machines.</p>
                    </div>
                    <div class="data-placeholder">
                        <div class="placeholder-content">
                            <div class="placeholder-icon">📊</div>
                            <h4 id="dataStatus">Data Loading...</h4>
                            <p id="dataMessage">Fuel consumption data will be displayed here once connected to Google Sheets.</p>
                            <button class="cta-button" onclick="loadData()">Load Data</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="analytics" class="analytics">
            <div class="container">
                <h2 class="section-title">Analytics Dashboard</h2>
                <div class="analytics-content">
                    <div class="analytics-intro">
                        <h3>Fuel Consumption Analytics</h3>
                        <p>Track trends, compare machines, and analyse fuel efficiency.</p>
                        

                        
                        <!-- Cost Calculator -->
                        <div class="cost-calculator">
                            <h4>Cost Analysis</h4>
                            <div class="cost-inputs">
                                                <label for="dieselPrice">Diesel Price per Litre (£):</label>
                <input type="number" id="dieselPrice" value="0.70" step="0.01" min="0" class="cost-input">
                                <button onclick="updateCostAnalysis()" class="cost-button">Update Analysis</button>
                            </div>
                            <div class="cost-summary">
                                <div class="cost-stat">
                                    <span class="cost-label">Total Cost This Month:</span>
                                    <span class="cost-value" id="monthlyCost">£0.00</span>
                                </div>
                                <div class="cost-stat">
                                    <span class="cost-label">Total Cost All Time:</span>
                                    <span class="cost-value" id="totalCost">£0.00</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="charts-grid">
                        <div class="chart-card">
                            <div class="chart-header">
                                <h4>Litres per Hour by Machine</h4>
                                <button class="enlarge-chart-btn" onclick="openChartModal('efficiencyChart', 'Litres per Hour by Machine')" title="Enlarge Chart">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M15 3H21V9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M9 21H3V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M21 3L13 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M3 21L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </button>
                            </div>
                            <div class="chart-container">
                                <canvas id="efficiencyChart"></canvas>
                            </div>
                        </div>
                        <div class="chart-card">
                            <div class="chart-header">
                                <h4>Monthly Fuel Consumption</h4>
                                <button class="enlarge-chart-btn" onclick="openChartModal('monthlyChart', 'Monthly Fuel Consumption')" title="Enlarge Chart">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M15 3H21V9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M9 21H3V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M21 3L13 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M3 21L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </button>
                            </div>
                            <div class="chart-container">
                                <canvas id="monthlyChart"></canvas>
                            </div>
                        </div>
                        <div class="chart-card">
                            <div class="chart-header">
                                <h4>Machine Fuel Usage Breakdown</h4>
                                <button class="enlarge-chart-btn" onclick="openChartModal('vehicleChart', 'Machine Fuel Usage Breakdown')" title="Enlarge Chart">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M15 3H21V9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M9 21H3V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M21 3L13 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M3 21L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </button>
                            </div>
                            <div class="chart-container">
                                <canvas id="vehicleChart"></canvas>
                            </div>
                        </div>
                        <div class="chart-card">
                            <div class="chart-header">
                                <h4>Cost Analysis by Machine</h4>
                                <button class="enlarge-chart-btn" onclick="openChartModal('costChart', 'Cost Analysis by Machine')" title="Enlarge Chart">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M15 3H21V9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M9 21H3V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M21 3L13 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M3 21L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </button>
                            </div>
                            <div class="chart-container">
                                <canvas id="costChart"></canvas>
                            </div>
                        </div>
                        <div class="chart-card">
                            <div class="chart-header">
                                <h4>Cost Per Month</h4>
                                <button class="enlarge-chart-btn" onclick="openChartModal('monthlyCostChart', 'Cost Per Month')" title="Enlarge Chart">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M15 3H21V9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M9 21H3V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M21 3L13 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M3 21L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </button>
                            </div>
                            <div class="chart-container">
                                <canvas id="monthlyCostChart"></canvas>
                            </div>
                        </div>
                        <div class="chart-card">
                            <div class="chart-header">
                                <h4>Fuel Usage by Month & Machine</h4>
                                <button class="enlarge-chart-btn" onclick="openChartModal('stackedMonthlyChart', 'Fuel Usage by Month & Machine')" title="Enlarge Chart">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M15 3H21V9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M9 21H3V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M21 3L13 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M3 21L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </button>
                            </div>
                            <div class="chart-container">
                                <canvas id="stackedMonthlyChart"></canvas>
                            </div>
                        </div>
                        <div class="chart-card">
                            <div class="chart-header">
                                <h4>Fuel Usage by Year & Machine</h4>
                                <button class="enlarge-chart-btn" onclick="openChartModal('yearlyMachineChart', 'Fuel Usage by Year & Machine')" title="Enlarge Chart">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M15 3H21V9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M9 21H3V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M21 3L13 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M3 21L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </button>
                            </div>
                            <div class="chart-container">
                                <canvas id="yearlyMachineChart"></canvas>
                            </div>
                        </div>
                        <div class="chart-card">
                            <div class="chart-header">
                                <h4>Monthly Trends</h4>
                                <button class="enlarge-chart-btn" onclick="openChartModal('monthlyTrendsChart', 'Monthly Trends')" title="Enlarge Chart">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M15 3H21V9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M9 21H3V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M21 3L13 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M3 21L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </button>
                            </div>
                            <div class="chart-container">
                                <canvas id="monthlyTrendsChart"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Analytics Summary -->
                    <div class="analytics-summary">
                        <div class="summary-card">
                            <h4>Efficiency Rankings</h4>
                            <div id="efficiencyRankings" class="rankings-list">
                                <p>Loading efficiency data...</p>
                            </div>
                        </div>
                        <div class="summary-card">
                            <h4>Monthly Trends</h4>
                            <div id="monthlyTrends" class="trends-list">
                                <p>Loading trend data...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="contact" class="contact">
            <div class="container">
                <h2 class="section-title">Quick Stats</h2>
                <div class="stats-content">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">⛽</div>
                            <h3>0</h3>
                            <p>Liters This Month</p>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">🛢️</div>
                            <h3>0</h3>
                            <p>All Time Litres</p>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">⏱️</div>
                            <h3>0</h3>
                            <p>Total Hours</p>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">📊</div>
                            <h3>0</h3>
                            <p>Fuel Logs</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Fuel Tracker. Built for efficient farm management.</p>
        </div>
    </footer>

    <!-- Chart Popup Modal -->
    <div id="chartModal" class="chart-modal">
        <div class="chart-modal-content">
            <div class="chart-modal-header">
                <h3 id="modalChartTitle">Chart Title</h3>
                <button class="chart-modal-close" onclick="closeChartModal()">&times;</button>
            </div>
            <div class="chart-modal-body">
                <canvas id="modalChartCanvas"></canvas>
            </div>
        </div>
    </div>

    <!-- Form Popup Modal -->
    <div id="formModal" class="form-modal">
        <div class="form-modal-content">
            <div class="form-modal-header">
                <h3>Fuel Log Form</h3>
                <button class="form-modal-close" onclick="closeFormModal()">&times;</button>
            </div>
            <div class="form-modal-body">
                <iframe 
                    src="https://docs.google.com/forms/d/e/1FAIpQLSdooF1nSkyBdkMW6JbZbK7E1M_cuUD-32rkk5hIMS5TjaPWbw/viewform?embedded=true" 
                    width="100%" 
                    height="100%" 
                    frameborder="0" 
                    marginheight="0" 
                    marginwidth="0">
                    Loading…
                </iframe>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html> 